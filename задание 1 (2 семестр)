#include <string>
#include <clocale>
#include <cmath>
#include <iostream>

using namespace std;

int main()
{
    setlocale(LC_ALL, "Russian");

    std::string number; // число
    std::cout << "Введите число:\n";
    std::cin >> number;

    int osnovanie_do; // система счисления текущего числа
    cout << "Введите основание текущего числа:\n";
    cin >> osnovanie_do;
    if (osnovanie_do < 2 || osnovanie_do > 64) {
        cout << "Система счисления должна быть в диапазоне от 2 до 64." << endl;
        return 1;
    } 


    int osnovanie_pocle; // система счисления, в которую нужно перевести
    cout << "Введите в какую систему счисления нужно перевести введенное число:\n";
    cin >> osnovanie_pocle;
    if (osnovanie_pocle < 2 || osnovanie_pocle > 64) {
        cout << "Система счисления должна быть в диапазоне от 2 до 64." << endl;
        return 1;
    }

    // "алфавит"
    const std::string base = ",0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/";
     
       // Проверка на возможность перевода
    for (char q : number) {
        if (base.find(q) >= osnovanie_do) {
            std::cout << "Число невозможно перевести в выбранную систему счисления." << std::endl;
            return 1;
        }
    }
 
  
    // перевод в 10
    int a = 0;
    for (char q : number) {
        int b = base.find(q);
        a = a * osnovanie_do + b;
    }
    
    // перевод в указанную
    std::string result;
    while (a > 0) {
        int c = a % osnovanie_do;
        result = base[c] + result;
        a /= osnovanie_pocle;
    }
    
    //перевод в 2-ую сисетму счисления
    int dv;
    while ( a > 0) {
        int c = a & osnovanie_do;
        dv = base[c] + dv;
        a/= 2;
    }
     int vose, des,shec;

    std::cout << "Число "<< number << " с основанием "<< osnovanie_do << " в "<< osnovanie_pocle << "-ой система счисления: " << result << std::endl;
    cout << "Число "<< number << " с основанием "<< osnovanie_do << " в 2-ой системе счисления:\n" << dv << endl;
    cout << "Число "<< number << " с основанием "<< osnovanie_do << " в 8-ой системе счисления:\n" << vose << endl;
    cout << "Число "<< number << " с основанием "<< osnovanie_do << " в 10-ой системе счисления:\n" << des << endl;
    cout << "Число "<< number << " с основанием "<< osnovanie_do << " в 16-ой системе счисления:\n" << shec << endl;

    return 0;
}
